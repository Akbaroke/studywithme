import { ImageResponse } from 'next/og';

export const runtime = 'edge';

export default async function handler(request: Request) {
  try {
    const { searchParams } = new URL(request.url);
    const hasTitle = searchParams.has('title');
    const title = hasTitle
      ? searchParams.get('title')?.slice(0, 100) + ' | studywithme.'
      : 'studywithme.';

    const image = (
      <div
        style={{
          height: '100%',
          width: '100%',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          backgroundColor: '#fff',
        }}>
        {logo()}
        <div style={{ marginTop: 10, fontSize: 30, fontWeight: 600 }}>
          {title}
        </div>
        <div
          style={{
            marginTop: 20,
            fontSize: 22,
            fontWeight: 200,
            color: 'gray',
          }}>
          Lihat selengkapnya..
        </div>
      </div>
    );

    return new ImageResponse(image, {
      width: 1200,
      height: 630,
    });
  } catch (error) {
    console.error(error);
    return new Response('Error', { status: 500 });
  }
}

const logo = () => (
  <svg
    version="1.1"
    id="Layer_1"
    xmlns="http://www.w3.org/2000/svg"
    xmlnsXlink="http://www.w3.org/1999/xlink"
    x="0px"
    y="0px"
    width="100%"
    viewBox="0 0 1079 1079"
    enableBackground="new 0 0 1079 1079"
    xmlSpace="preserve">
    <path
      fill="#000000"
      opacity={1.0}
      stroke="none"
      d="
M713.000000,1080.000000 
	C475.360718,1080.000000 238.221466,1080.000000 1.041094,1080.000000 
	C1.041094,720.402283 1.041094,360.804565 1.041094,1.103414 
	C360.556152,1.103414 720.112366,1.103414 1079.834229,1.103414 
	C1079.834229,360.666595 1079.834229,720.333313 1079.834229,1080.000000 
	C957.804138,1080.000000 835.652039,1080.000000 713.000000,1080.000000 
M629.663574,826.171814 
	C685.253601,770.553772 740.844116,714.936157 796.428406,659.312378 
	C797.251587,658.488647 798.038086,657.620483 798.772522,656.716858 
	C808.285828,645.011169 812.318115,631.747192 810.208557,616.703064 
	C808.406738,603.854004 801.421143,593.981689 792.498413,585.101257 
	C740.318298,533.168518 688.046814,481.326141 636.119568,429.141418 
	C622.777527,415.733154 608.330139,406.996307 588.526550,408.823914 
	C566.522583,410.854614 546.498840,430.655731 544.976013,452.645203 
	C543.742249,470.460938 550.974304,484.377869 563.326904,496.609070 
	C590.184998,523.203308 616.696777,550.146973 643.402344,576.895691 
	C652.899170,586.407776 662.584839,595.731018 672.112610,605.212463 
	C678.353821,611.423340 684.466309,617.763428 690.768555,624.180176 
	C688.885803,626.187073 687.678711,627.551880 686.390503,628.835388 
	C663.378601,651.762451 640.320923,674.643677 617.348450,697.610168 
	C597.672424,717.281067 578.198303,737.154907 558.433105,756.735229 
	C544.040100,770.993713 541.340820,788.265869 546.917603,806.483093 
	C557.099976,839.745117 600.265747,853.860046 629.663574,826.171814 
M478.587250,242.996506 
	C466.166351,244.710052 456.248108,250.950012 447.538239,259.689545 
	C419.070526,288.254364 390.463165,316.680023 361.967773,345.217346 
	C335.592499,371.631439 309.247772,398.076416 282.977936,424.595276 
	C270.216797,437.477417 266.325989,453.061859 270.123627,470.562286 
	C272.666931,482.282532 280.241058,490.979950 288.465210,499.158081 
	C312.564697,523.122681 336.709747,547.041504 360.765717,571.049683 
	C390.248932,600.474487 419.640533,629.991028 449.110962,659.428589 
	C462.526276,672.828979 478.552246,677.984497 497.081299,673.359863 
	C534.731934,663.962646 547.125671,618.281006 519.485596,590.210205 
	C483.123840,553.281860 446.403534,516.706726 409.842865,479.974213 
	C403.186584,473.286713 396.556427,466.573242 389.562073,459.516449 
	C392.600647,456.250122 395.441711,453.018219 398.467865,449.969971 
	C437.797546,410.353180 477.220490,370.828522 516.420715,331.084198 
	C521.509644,325.924744 526.904358,320.288361 529.741882,313.814209 
	C547.240173,273.889832 515.468384,238.118561 478.587250,242.996506 
M851.015320,459.656982 
	C883.403564,442.959747 889.635681,403.747162 863.899719,378.060547 
	C841.737854,355.941254 819.512329,333.885193 797.229736,311.887512 
	C777.128906,292.043854 746.047363,292.123444 726.361938,311.937714 
	C706.911072,331.515900 706.967896,362.590424 726.740906,382.420807 
	C749.084534,404.829163 771.463013,427.207733 794.140442,449.276489 
	C810.343323,465.044312 829.328430,468.295929 851.015320,459.656982 
M300.395813,645.104370 
	C295.545471,640.297302 290.790039,635.389771 285.828217,630.700684 
	C265.804779,611.778015 234.827072,612.396545 215.647751,632.029358 
	C196.711075,651.413818 196.713547,682.438599 215.988968,701.818420 
	C238.775055,724.727966 261.769104,747.431763 284.781311,770.114746 
	C293.400604,778.610901 303.939087,783.350891 316.038452,783.978760 
	C337.745300,785.105042 356.557220,773.665161 365.034210,754.533386 
	C373.635406,735.121216 369.370422,713.655701 353.723785,698.067139 
	C336.142670,680.551270 318.507935,663.089172 300.395813,645.104370 
M459.445190,850.838440 
	C474.001648,814.916992 449.364075,779.091309 411.260101,780.772095 
	C390.180237,781.701965 371.653107,796.845581 366.062408,817.715698 
	C360.629517,837.996887 369.415527,860.486206 387.351929,871.501892 
	C389.741730,872.969604 392.875580,873.815063 395.693420,873.891235 
	C406.012726,874.169800 416.431030,873.167053 426.647034,874.231140 
	C437.320251,875.342896 444.582001,870.543091 450.963959,863.397034 
	C454.136627,859.844604 456.429382,855.506409 459.445190,850.838440 
M699.977844,287.487305 
	C725.386292,264.009277 718.257507,223.262192 692.297668,209.053848 
	C690.219849,207.916565 687.666748,207.123871 685.320496,207.087952 
	C672.833557,206.896759 660.340210,206.881836 647.854004,207.095688 
	C645.351990,207.138550 642.574707,207.944214 640.427734,209.235229 
	C622.323364,220.121216 613.334534,242.155762 618.599182,263.299469 
	C627.337524,298.394073 669.705994,313.759247 699.977844,287.487305 
z"
    />
    <path
      fill="#E1E1E1"
      opacity={1.0}
      stroke="none"
      d="
M629.404297,826.412354 
	C600.265747,853.860046 557.099976,839.745117 546.917603,806.483093 
	C541.340820,788.265869 544.040100,770.993713 558.433105,756.735229 
	C578.198303,737.154907 597.672424,717.281067 617.348450,697.610168 
	C640.320923,674.643677 663.378601,651.762451 686.390503,628.835388 
	C687.678711,627.551880 688.885803,626.187073 690.768555,624.180176 
	C684.466309,617.763428 678.353821,611.423340 672.112610,605.212463 
	C662.584839,595.731018 652.899170,586.407776 643.402344,576.895691 
	C616.696777,550.146973 590.184998,523.203308 563.326904,496.609070 
	C550.974304,484.377869 543.742249,470.460938 544.976013,452.645203 
	C546.498840,430.655731 566.522583,410.854614 588.526550,408.823914 
	C608.330139,406.996307 622.777527,415.733154 636.119568,429.141418 
	C688.046814,481.326141 740.318298,533.168518 792.498413,585.101257 
	C801.421143,593.981689 808.406738,603.854004 810.208557,616.703064 
	C812.318115,631.747192 808.285828,645.011169 798.772522,656.716858 
	C798.038086,657.620483 797.251587,658.488647 796.428406,659.312378 
	C740.844116,714.936157 685.253601,770.553772 629.404297,826.412354 
z"
    />
    <path
      fill="#E1E1E1"
      opacity={1.0}
      stroke="none"
      d="
M479.019257,242.961243 
	C515.468384,238.118561 547.240173,273.889832 529.741882,313.814209 
	C526.904358,320.288361 521.509644,325.924744 516.420715,331.084198 
	C477.220490,370.828522 437.797546,410.353180 398.467865,449.969971 
	C395.441711,453.018219 392.600647,456.250122 389.562073,459.516449 
	C396.556427,466.573242 403.186584,473.286713 409.842865,479.974213 
	C446.403534,516.706726 483.123840,553.281860 519.485596,590.210205 
	C547.125671,618.281006 534.731934,663.962646 497.081299,673.359863 
	C478.552246,677.984497 462.526276,672.828979 449.110962,659.428589 
	C419.640533,629.991028 390.248932,600.474487 360.765717,571.049683 
	C336.709747,547.041504 312.564697,523.122681 288.465210,499.158081 
	C280.241058,490.979950 272.666931,482.282532 270.123627,470.562286 
	C266.325989,453.061859 270.216797,437.477417 282.977936,424.595276 
	C309.247772,398.076416 335.592499,371.631439 361.967773,345.217346 
	C390.463165,316.680023 419.070526,288.254364 447.538239,259.689545 
	C456.248108,250.950012 466.166351,244.710052 479.019257,242.961243 
z"
    />
    <path
      fill="#9B9B99"
      opacity={1.0}
      stroke="none"
      d="
M850.666138,459.807709 
	C829.328430,468.295929 810.343323,465.044312 794.140442,449.276489 
	C771.463013,427.207733 749.084534,404.829163 726.740906,382.420807 
	C706.967896,362.590424 706.911072,331.515900 726.361938,311.937714 
	C746.047363,292.123444 777.128906,292.043854 797.229736,311.887512 
	C819.512329,333.885193 841.737854,355.941254 863.899719,378.060547 
	C889.635681,403.747162 883.403564,442.959747 850.666138,459.807709 
z"
    />
    <path
      fill="#9C9B99"
      opacity={1.0}
      stroke="none"
      d="
M300.646179,645.354004 
	C318.507935,663.089172 336.142670,680.551270 353.723785,698.067139 
	C369.370422,713.655701 373.635406,735.121216 365.034210,754.533386 
	C356.557220,773.665161 337.745300,785.105042 316.038452,783.978760 
	C303.939087,783.350891 293.400604,778.610901 284.781311,770.114746 
	C261.769104,747.431763 238.775055,724.727966 215.988968,701.818420 
	C196.713547,682.438599 196.711075,651.413818 215.647751,632.029358 
	C234.827072,612.396545 265.804779,611.778015 285.828217,630.700684 
	C290.790039,635.389771 295.545471,640.297302 300.646179,645.354004 
z"
    />
    <path
      fill="#9B9A98"
      opacity={1.0}
      stroke="none"
      d="
M459.282715,851.181030 
	C456.429382,855.506409 454.136627,859.844604 450.963959,863.397034 
	C444.582001,870.543091 437.320251,875.342896 426.647034,874.231140 
	C416.431030,873.167053 406.012726,874.169800 395.693420,873.891235 
	C392.875580,873.815063 389.741730,872.969604 387.351929,871.501892 
	C369.415527,860.486206 360.629517,837.996887 366.062408,817.715698 
	C371.653107,796.845581 390.180237,781.701965 411.260101,780.772095 
	C449.364075,779.091309 474.001648,814.916992 459.282715,851.181030 
z"
    />
    <path
      fill="#9B9A98"
      opacity={1.0}
      stroke="none"
      d="
M699.718201,287.727722 
	C669.705994,313.759247 627.337524,298.394073 618.599182,263.299469 
	C613.334534,242.155762 622.323364,220.121216 640.427734,209.235229 
	C642.574707,207.944214 645.351990,207.138550 647.854004,207.095688 
	C660.340210,206.881836 672.833557,206.896759 685.320496,207.087952 
	C687.666748,207.123871 690.219849,207.916565 692.297668,209.053848 
	C718.257507,223.262192 725.386292,264.009277 699.718201,287.727722 
z"
    />
  </svg>
);
